import{r as c,a as r,j as t,c as I}from"./index-a1f7947d.js";import{F as ne,I as R}from"./Input-897b76d1.js";const se=[{valveName:"15-1",int:-19.04072,B1:158.00988,B2:-114.91494,B3:92.42785,B4:-12.29976,calcCon_val_calc:s},{valveName:"15-1,6",int:-5.2184,B1:40.81085,B2:19.89139,B3:-11.76124,B4:4.98452,calcCon_val_calc:s},{valveName:"15-2,5",int:-16.80228,B1:82.15408,B2:-74.52091,B3:30.7459,B4:-2.65905,calcCon_val_calc:s},{valveName:"20-4",int:-1.22153,B1:11.17824,B2:-8.37302,B3:5.11344,B4:-.40786,calcCon_val_calc:s},{valveName:"20-6,3",int:6.29783,B1:-11.63941,B2:7.25707,B3:-.42451,B4:.01075,calcCon_val_calc:s},{valveName:"25-6,3",int:6.29783,B1:-11.63941,B2:7.25707,B3:-.42451,B4:.01075,calcCon_val_calc:s},{valveName:"25-10",int:-10.10451,B1:9.74352,B2:-1.11385,B3:.18086,B4:-.00491,calcCon_val_calc:s},{valveName:"32-16",int:-18.74865,B1:11.1291,B2:-1.09665,B3:.06728,B4:-862257e-9,calcCon_val_calc:s},{valveName:"40-25",int:-6.1116,B1:2.63122,B2:-.08469,B3:.00674,B4:-382241e-10,calcCon_val_calc:s},{valveName:"50-40",int:6.2866,B1:-2.11869,B2:.28995,B3:-.00843,B4:974261e-10,calcCon_val_calc:s}],le=[{pumpName:"15-1",int:38.73627,B1:-8.18855,B2:-.68647,calcPump:l},{pumpName:"15-1,6",int:38.73627,B1:-8.18855,B2:-.68647,calcPump:l},{pumpName:"15-2,5",int:38.73627,B1:-8.18855,B2:-.68647,calcPump:l},{pumpName:"20-4",int:58.34957,B1:-10.10902,B2:-.50668,calcPump:l},{pumpName:"20-6,3",int:58.34957,B1:-10.10902,B2:-.50668,calcPump:l},{pumpName:"25-6,3",int:79.43386,B1:-7.06525,B2:.06686,calcPump:l},{pumpName:"25-10",int:79.43386,B1:-7.06525,B2:.06686,calcPump:l},{pumpName:"32-16",int:79.43386,B1:-7.06525,B2:.06686,calcPump:l},{pumpName:"40-25",int:79.43386,B1:-7.06525,B2:.06686,calcPump:l},{pumpName:"50-40",int:103.22108,B1:-.74958,B2:-.07347,calcPump:l}];function s(o){return Math.pow(o,4)*this.B4+Math.pow(o,3)*this.B3+Math.pow(o,2)*this.B2+o*this.B1+this.int}function l(o){return Math.pow(o,2)*this.B2+o*this.B1+this.int}const ie="_InputToggle_yun7x_2",he="_input_yun7x_6",me="_label_yun7x_11",ue="_span_yun7x_15",pe="_radio_yun7x_35",_e="_checkbox_yun7x_47",v={InputToggle:ie,input:he,label:me,span:ue,radio:pe,checkbox:_e},p=c.memo(o=>{const{type:B,id:i,checked:y,onChange:C,children:b}=o;return r("div",{className:v.InputToggle,children:[t("input",{className:v.input,id:i,type:B,checked:y,onChange:C}),r("label",{className:v.label,htmlFor:i,children:[t("span",{className:I(v.span,{},[v[B]])}),b]})]})}),de="_mixer_reayh_2",ve="_show_reayh_1",Be="_form_reayh_16",xe="_block__table_reayh_20",ge="_table_reayh_24",Ne="_row_reayh_52",ye="_row__match_reayh_56",Ce="_clipboard_reayh_63",be="_match_reayh_72",Pe="_notMatch_reayh_76",fe="_mixer_choice_reayh_80",ke="_mixer_text_reayh_95",Se="_textShow_reayh_1",we="_checkShow_reayh_1",n={mixer:de,show:ve,form:Be,block__table:xe,table:ge,row:Ne,row__match:ye,clipboard:Ce,match:be,notMatch:Pe,mixer_choice:fe,mixer_text:ke,textShow:Se,checkShow:we},Me=c.memo(()=>r("thead",{children:[r("tr",{children:[t("th",{rowSpan:"2",children:"Смеситель"}),r("th",{rowSpan:"2",children:["Падение ",t("br",{})," давления, кПа"]}),t("th",{colSpan:"9",children:"Проверка условий"})]}),r("tr",{children:[t("th",{colSpan:"5",children:"Авторитет клапана"}),t("th",{colSpan:"2",children:"Общее падение давления жидкости, кПа"}),r("th",{colSpan:"2",children:["Напор ",t("br",{})," насоса, кПа"]})]})]})),Te=()=>{const[o,B]=c.useState(.5),[i,y]=c.useState(1),[C,b]=c.useState([]),[V,k]=c.useState(!1),[F,S]=c.useState(""),[P,U]=c.useState("SU"),[f,$]=c.useState("2"),[_,j]=c.useState(!1),[d,E]=c.useState(!1),[q,w]=c.useState(""),[z,M]=c.useState(""),x=/\./,g=2,G=["15-1","15-1,6","15-2,5","20-4","20-6,3","25-6,3","25-10","32-16","40-25","50-40"],H=()=>{if(o&&i){const e=se.map(a=>a.calcCon_val_calc(o)),h=le.map(a=>a.calcPump(o)),m=e.map(a=>8+i+a),D=e.map((a,u)=>a/m[u]),N=G.map((a,u)=>({mixerName:a,valvePressureDrop:e[u],valveAuthority:D[u],totalPressureDrop:m[u],pumpPressure:h[u]}));b([...N]);const re=a=>(.15<=a.valveAuthority||.15*.9<=a.valveAuthority)&&(a.valveAuthority<=.8||a.valveAuthority<=.8*1.1)&&(a.pumpPressure>=a.totalPressureDrop||a.pumpPressure*1.1>=a.totalPressureDrop)&&(a.match=!0);N.forEach(a=>re(a))}},J=((e,h)=>{const m=c.useRef(null);return c.useCallback((...N)=>{m.current&&clearTimeout(m.current),m.current=setTimeout(()=>{e(...N)},h)},[e,h])})(()=>{k(!1),S(""),console.log("end")},8888);function K(e){const h=`Смесительный узел ${P} ${e} с ${f}-х ходовым клапаном${z}${q}`;navigator.clipboard.writeText(h).then(()=>{S(h),k(!0),J()})}const T=e=>{U(e.target.id)},A=e=>{$(e.target.id)},L=()=>{console.log(_,"isReverseConfig"),j(!_),console.log(_,"isReverseConfig"),w(_?"":" (Обратной конфигурации)")},O=()=>{console.log(d,"isReverseConfig"),E(!d),console.log(d,"isReverseConfig"),M(d?"":" и термоманометрами")};c.useEffect(()=>{H()},[o,i]);const Q=e=>t("td",{children:e.mixerName}),W=e=>t("td",{children:e.valvePressureDrop.toFixed(g).replace(x,",")}),X=t("td",{children:"0,25 (0,15)"}),Y=e=>.15*.9<=e.valveAuthority?t("td",{children:"<"}):t("td",{className:n.notMatch,children:">"}),Z=e=>t("td",{children:e.valveAuthority.toFixed(g).replace(x,",")}),ee=e=>e.valveAuthority<=.8*1.1?t("td",{children:"<"}):t("td",{className:n.notMatch,children:">"}),te=t("td",{children:"0,8"}),ae=e=>t("td",{children:e.totalPressureDrop.toFixed(g).replace(x,",")}),ce=e=>e.totalPressureDrop<=e.pumpPressure*1.1?t("td",{children:"<"}):t("td",{className:n.notMatch,children:">"}),oe=e=>t("td",{children:e.pumpPressure.toFixed(g).replace(x,",")});return r("section",{className:n.mixer,children:[r(ne,{title:"Расчёт смесительного узла",className:n.form,children:[t(R,{label:"Расход жидкости (м³/ч):",value:o,onChange:e=>{B(Number(e.target.value.replace(/,/gi,".")))}}),t(R,{label:"Падение давления жидкости в ТО (кПа):",value:i,onChange:e=>{y(Number(e.target.value.replace(/,/gi,".")))}}),r("div",{className:"form-item",children:[t(p,{type:"radio",id:"SU",checked:P==="SU",onChange:T,children:"SU"}),t(p,{type:"radio",id:"MSU",checked:P==="MSU",onChange:T,children:"MSU"}),t(p,{type:"radio",id:"2",checked:f==="2",onChange:A,children:"2-х ходовой клапан"}),t(p,{type:"radio",id:"3",checked:f==="3",onChange:A,children:"3-х ходовой клапан"})]}),r("div",{className:"form-item",children:[t(p,{type:"checkbox",id:"reverseConfig",checked:_,onChange:L,children:"Обратной конфигурацией"}),t(p,{type:"checkbox",id:"thermomanometer",checked:d,onChange:O,children:"Термоманометр"})]})]}),r("div",{className:n.block__table,children:[r("table",{className:n.table,children:[t(Me,{}),t("tbody",{children:C.map(e=>r("tr",{className:I(n.row,{[n.match]:e.match},[]),onClick:()=>K(e.mixerName),children:[Q(e),W(e),X,Y(e),Z(e),ee(e),te,ae(e),ce(e),oe(e)]},e.mixerName))})]}),t("div",{className:n.mixer_choice,children:V&&r("p",{className:n.mixer_text,children:[t("u",{children:"Скопирован:"}),"  ",t("i",{children:F})]})})]})]})},Ie=()=>t(Te,{});export{Ie as default};
